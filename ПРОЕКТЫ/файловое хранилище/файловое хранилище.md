### **Организация файлового хранилища в ERP**  

#### **1. Файлы**  

##### **1.1. Физическое хранение**  
Файлы могут храниться в разных типах хранилищ:  
- **Файловый сервер (файловая шара)**  
  - Поддержка SMB/NFS  
  - Возможность монтирования на клиентские машины  
  - Контроль доступа на уровне ОС (ACL, группы)  

- **FTP(SFTP) Сервер**  
  - Поддержка защищённых соединений (TLS/SSH)  
  - Ограничение по IP/логинам  
  - Логирование операций  

- **Объектное хранилище (S3, MinIO, Azure Blob, Google Cloud Storage)**  
  - Версионность  
  - Политики жизненного цикла файлов (автоархивация, удаление)  
  - Шифрование данных  

##### **1.2. Контроль целостности и безопасности**  
- **Контроль имени и идентификатора файла** (генерация уникального ID)  
- **Контроль уникальности** (опциональный — зависит от требований)  
- **Контроль версий** (хранение истории изменений, восстановление версий)  
- **Логирование доступа и изменений на физическом уровне** (кто, когда, какие изменения внёс, скачивание, удаление)  
##### 1.3 **Политика удаления**
- Политики жизненного цикла файлов (автоархивация, удаление) 

---

#### **2. Представление в интерфейсе**  

##### **2.1. Структуры отображения файлов**  
Файлы привязываются к разным объектам системы и могут иметь разную логику отображения:  
- **Складские документы** — файлы прикрепляются к накладным, ордерам, товарным позициям.  
- **Конструкторская документация** — организуется в папки, созданные конструкторским отделом (по номенклатуре, проектам).  
- **Проектная документация** — структура может быть как типовой (по шаблону), так и уникальной для каждого проекта.  
- **Файлы для нормативных документов** (сертификаты, регламенты, лицензии) — могут иметь даты истечения, необходимость обновления.  

##### **2.2. Метаданные файлов**  
- Привязка к объекту системы  
- Описание файла (тип, размер, дата добавления, автор)  
- Метки/теги для быстрого поиска  

---

#### **3. Работа с файлами**  

##### **3.1. Поиск файлов**  
- По имени  
- По метаданным (дата загрузки, автор, тип, версия)  
- По объекту системы, к которому файл прикреплён  
- По содержимому (опционально, если поддерживается OCR/индексация)  

##### **3.2. Управление файлами**  
- **Добавление файла** (с загрузкой в хранилище и привязкой к объекту)  
- **Добавление ссылки на файл** (если файл уже существует в другом месте, можно прикрепить его ссылку)  
- **Прикрепление файла к объектам системы** (к заказам, проектам, накладным и пр.)  
- **Удаление файлов** (контроль политики удаления: архивирование, soft-delete)  

---

#### **4. Разграничение доступа**  
- **Ролевые модели доступа** (администраторы, пользователи, отделы)  
- **Гранулярные права** (чтение, редактирование, загрузка, удаление)  
- **Привязка прав к объектам системы** (например, файлы склада доступны только складу)  
- **Поддержка интеграции с LDAP/Active Directory**  
- **Механизм запросов на доступ** (если у пользователя нет прав, он может запросить доступ)  

---

#### **5. Логирование доступа и изменений на бизнес-уровне**  
- Кто загрузил/изменил/удалил файл  
- Какие файлы скачивали пользователи  
- Запись всех действий в журнал (для аудита и контроля безопасности)  

### **Дополнительные возможные функции**  
- **API для интеграции** с внешними сервисами и системами  
- **Поддержка Drag & Drop в интерфейсе**  
- **Оповещения при изменении файлов** (например, если файл обновили)  
- **Инструменты предпросмотра (PDF, изображения, 3D-модели)**  
